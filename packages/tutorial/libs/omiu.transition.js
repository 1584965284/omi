(function(s,a){typeof exports=="object"&&typeof module!="undefined"?module.exports=a(require("omi")):typeof define=="function"&&define.amd?define(["omi"],a):(s=typeof globalThis!="undefined"?globalThis:s||self,s.index=a(s.omi))})(this,function(s){"use strict";const a=[];document.addEventListener("DOMContentLoaded",()=>{n.done=!0,a.forEach(t=>{t()})});function n(t){if(n.done){t();return}a.push(t)}n.done=!1;var l=Object.defineProperty,d=Object.getOwnPropertyDescriptor,c=(t,e,i,o)=>{for(var r=o>1?void 0:o?d(e,i):e,p=t.length-1,h;p>=0;p--)(h=t[p])&&(r=(o?h(e,i,r):h(r))||r);return o&&r&&l(e,i,r),r};return exports.default=class extends s.WeElement{constructor(){super(...arguments),this._show=!0}installed(){n(()=>{this.props.appear&&this.enter(),this.props.leavingTime&&setTimeout(()=>{this.leave()},this.props.leavingTime)})}receiveProps(){this.props.appear&&this.enter(),this.props.disappear&&this.leave()}async toggle(){return this._show=!this._show,this._show?await this.enter():await this.leave()}async enter(){return new Promise(t=>{const e=this.children[0];e&&(this.fire("before-enter"),e.classList.remove(this.props.name+"-leave-active"),e.classList.remove(this.props.name+"-leave-to"),e.classList.add(this.props.name+"-enter-from"),e.classList.add(this.props.name+"-enter-active"),this.callback=function(){e.classList.remove(this.props.name+"-enter-active"),this.fire("after-enter"),this._show=!0,t()}.bind(this),this.once("transitionend",this.callback),this.once("animationend",this.callback),window.setTimeout(function(){e.classList.remove(this.props.name+"-enter-from"),e.classList.add(this.props.name+"-enter-to"),this.fire("enter")}.bind(this),this.props.delay))})}async leave(){return new Promise(t=>{const e=this.children[0];e&&(this.fire("before-leave"),e.classList.remove(this.props.name+"-enter-active"),e.classList.remove(this.props.name+"-enter-to"),e.classList.add(this.props.name+"-leave-from"),e.classList.add(this.props.name+"-leave-active"),this.callback=function(i){e.classList.remove(this.props.name+"-leave-active"),this.fire("after-leave"),this._show=!1,this.props.autoRemove&&this.parentNode&&this.parentNode.removeChild(this),t()}.bind(this),this.once("transitionend",this.callback),this.once("animationend",this.callback),window.setTimeout(function(){e.classList.remove(this.props.name+"-leave-from"),e.classList.add(this.props.name+"-leave-to"),this.fire("leave")}.bind(this),this.props.delay))})}once(t,e){const i=function(){this.removeEventListener(t,i),e()}.bind(this);this.addEventListener(t,i)}render(){}},exports.default.propTypes={name:String,leavingTime:Number,autoRemove:Boolean,appear:Boolean,disappear:Boolean,delay:Number},exports.default.isLightDom=!0,exports.default.defaultProps={name:"o",delay:0},exports.default=c([s.tag("o-transition")],exports.default),exports.default});
