import{W as b,h as n,e as c,b as h,a as g}from"./index.de005dcb.js";import"./index.ea61b45e.js";import"./index.esm.46305b4d.js";const u=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function i(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(o){if(o.ep)return;o.ep=!0;const r=i(o);fetch(o.href,r)}};u();async function x(e,t,i){return new Promise(a=>{e.classList.remove(t+"-enter-active"),e.classList.remove(t+"-enter-to"),e.classList.add(t+"-leave"),e.classList.add(t+"-leave-active");const o=function(r){e.classList.remove(t+"-leave-active"),a(1)};f(e,"transitionend",o),f(e,"animationend",o),window.setTimeout(function(){e.classList.remove(t+"-leave"),e.classList.add(t+"-leave-to")},i)})}function f(e,t,i){const a=function(){this.removeEventListener(t,a),i()}.bind(e);e.addEventListener(t,a)}var p=`:host{display:block}.o-table{overflow:auto}.o-table-border{border:1px solid #ebeef5}.o-table-table{background:white;width:100%;border-spacing:0;border-collapse:collapse;color:#606266}.o-table-checkbox th:first-child,.o-table-checkbox td:first-child{padding:2px 10px}th{border-bottom:1px solid #e0e0e0;text-align:left;vertical-align:middle;padding:10px;color:#0000008a;line-height:1.3125rem;font-weight:500;background:#fafafa;white-space:nowrap}th,td{white-space:nowrap;font-size:.875rem;overflow:hidden;text-overflow:ellipsis}th.fixed-top{position:sticky;top:0;z-index:1000}table thead th.fixed-left{position:sticky;left:0;z-index:1001}table tbody td.fixed-left{position:sticky;left:0;z-index:999}table thead th.fixed-right{position:sticky;z-index:1001}table tbody td.fixed-right{position:sticky;z-index:1000}.o-table-border td,.o-table-border th{border-right:1px solid #ebeef5}.o-table-border td:last-child,.o-table-border th:last-child{border-right:none}.o-table-border th{border-bottom:1px solid #ebeef5}tr{border-bottom:1px solid #e0e0e0}tr:last-child{border-bottom:none}tr:hover td{background:#f5f5f5}td{text-align:left;vertical-align:middle;padding:10px;background:white}td.compact,th.compact{padding:4px 10px}a{text-decoration:none}.o-table-align-left{text-align:left}.o-table-align-center{text-align:center}o-checkbox{height:20px;vertical-align:middle}.o-table-align-right{text-align:right}a,a:link,a:visited,a:active{text-decoration:none;color:#07c160}a:hover{color:#07c160;color:var(--o-primary, #07c160)}o-checkbox{margin-right:5px}.o-table-stripe tr:nth-of-type(odd){background:white}.o-table-stripe tr:nth-of-type(even){background:#fafafa}.slide-fade-enter-active{transition:all .3s ease}.slide-fade-leave-active{transition:all .3s cubic-bezier(1,.5,.8,1)}.slide-fade-enter,.slide-fade-leave-to{transform:translate(-40px);opacity:0}
`,y=Object.defineProperty,v=Object.getOwnPropertyDescriptor,k=(e,t,i,a)=>{for(var o=a>1?void 0:a?v(t,i):t,r=e.length-1,d;r>=0;r--)(d=e[r])&&(o=(a?d(t,i,o):d(o))||o);return a&&o&&y(t,i,o),o};let s=class extends b{constructor(){super(...arguments),this.deleteRow=e=>{this.props.dataSource.splice(this.props.dataSource.indexOf(e),1),this.update()},this._changeHandlerTh=(e,t)=>{this.fire("change-all",{item:t,checked:e.detail}),this.props.dataSource.forEach(i=>{i.checked=e.detail}),this.update()},this._changeHandlerTd=(e,t)=>{this.fire("change",{item:t,checked:e.detail}),t.checked=e.detail,this.update()},this.onChange=(e,t,i)=>{const a=t[i.key];t[i.key]=e.detail,this.update(),this.fire("data-changed",{value:t[i.key],oldValue:a,item:t,column:i})},this.onTdClick=(e,t,i)=>{i.stopPropagation(),this.props.dataSource.forEach(a=>{a.editingKey=null}),e.editingKey=t.key,this.update(),this.editingInput&&this.editingInput.focus()}}async deleteRowById(e){const t=this.props.dataSource;await x(this["row"+e],"slide-fade");const i=t.find(a=>a.id+""==e+"");i&&this.deleteRow(i)}_getCheckedState(){let e=0,t=0;for(let i=0,a=this.props.dataSource.length;i<a;i++)if(this.props.dataSource[i].checked?e++:t++,e>0&&t>0)return{indeterminate:!0};return e===0?{unchecked:!0}:{checked:!0}}installed(){this.setFixedLeft(),this.setFixedRight(),window.addEventListener("click",()=>{let e=!1;this.props.dataSource.forEach(t=>{t.editingKey&&(e=!0),t.editingKey=null}),e&&this.update()})}updated(){this.setFixedLeft(),this.setFixedRight()}setFixedLeft(){const e=this.rootNode.querySelectorAll(".fixed-left"),t=this.rootNode.getBoundingClientRect();e.forEach(i=>{const a=i.getBoundingClientRect();i.style.left=a.left-t.left-1+"px"})}setFixedRight(){this.rootNode.querySelectorAll(".fixed-right").forEach(t=>{t.style.right="0px"})}render(e){if(!!e.columns&&!!e.dataSource)return e.fixedRight&&(e.columns[e.columns.length-1].fixed=!0),n("div",{style:{width:e.width&&e.width,height:e.height&&e.height},...c(e,"o-table",{"o-table-checkbox":e.checkbox,"o-table-border":e.border,"o-table-stripe":e.stripe})},n("table",{...c(e,"o-table-table")},n("thead",null,n("tr",null,e.columns.map((t,i)=>{const a={},{maxWidth:o}=t;return o!==void 0&&(a.style={maxWidth:typeof o=="number"?o+"px":o}),n("th",{...a,title:t.title,class:h({[`o-table-align-${t.align}`]:t.align,compact:e.compact,"fixed-top":e.fixedTop,"fixed-left":i<e.fixedLeftCount,"fixed-right":t.fixed})},i===0&&e.checkbox&&n("o-checkbox",{...this._getCheckedState(),onChange:r=>this._changeHandlerTh(r,t)}),t.title)}))),n("tbody",{class:"o-table-tbody"},e.dataSource.map(t=>n("tr",{key:t.id,ref:i=>this["row"+t.id]=i,style:{background:t.$config&&t.$config.bgColor}},e.columns.map((i,a)=>{const o={},{maxWidth:r}=i;r!==void 0&&(o.style={maxWidth:typeof r=="number"?r+"px":r});const d=i.render?i.render(t):t[i.key];return n("td",{title:typeof d=="string"?d:null,onClick:l=>this.onTdClick(t,i,l),...o,class:h({[`o-table-align-${i.align}`]:i.align,compact:e.compact,"fixed-left":a<e.fixedLeftCount,"fixed-right":i.fixed})},a===0&&e.checkbox&&n("o-checkbox",{checked:t.checked,onChange:l=>this._changeHandlerTd(l,t)}),i.editable&&t.editingKey===i.key?n("o-input",{ref:l=>this.editingInput=l,size:"mini",onChange:l=>{this.onChange(l,t,i)},value:d}):d)}))))))}};s.css=p;s.defaultProps={dataSource:[],columns:[],checkbox:!1,border:!1,stripe:!1,compact:!1,fixedTop:!1,fixedRight:!1,fixedLeftCount:0};s.propTypes={dataSource:Object,columns:Object,checkbox:Boolean,border:Boolean,stripe:Boolean,compact:Boolean,width:String,height:String,fixedTop:Boolean,fixedRight:Boolean,fixedLeftCount:Number};s=k([g("o-table")],s);
